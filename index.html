<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–õ–µ—Å–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        .game-container {
            text-align: center;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(6, 60px);
            gap: 2px;
            margin: 20px auto;
        }
        .cell {
            width: 60px;
            height: 60px;
            border: 1px solid #ccc;
            font-size: 30px;
            text-align: center;
            cursor: pointer;
            background-color: #d2b48c; /* –ü–µ—Å–æ–∫ –¥–ª—è –Ω–µ–ø–ª–æ–¥–æ—Ä–æ–¥–Ω–æ–π */
        }
        .fertile {
            background-color: #8b4513; /* –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π –¥–ª—è –ø–ª–æ–¥–æ—Ä–æ–¥–Ω–æ–π */
        }
        #info, #controls {
            margin: 10px 0;
        }
        progress {
            width: 200px;
            height: 20px;
            margin: 10px auto;
        }
        #toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }
        button {
            padding: 5px 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>–õ–µ—Å–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</h1>
        <div id="info">–£—Ä–æ–≤–µ–Ω—å: 1 | –°–∞–∂–µ–Ω—Ü–µ–≤: 5 | –ú–æ–Ω–µ—Ç—ã: 0 | –û—á–∫–∏: 0</div>
        <progress id="levelProgress" value="0" max="4"></progress> <!-- –®–∫–∞–ª–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —É—Ä–æ–≤–Ω—è 1 (–Ω—É–∂–Ω–æ 4 –¥–µ—Ä–µ–≤–∞) -->
        <div id="controls">
            <button onclick="buySeedlings()">–î–æ–∫—É–ø–∏—Ç—å —Å–∞–∂–µ–Ω—Ü—ã (2 –º–æ–Ω–µ—Ç—ã –∑–∞ 1 —Å–∞–∂–µ–Ω–µ—Ü)</button>
        </div>
        <div class="grid" id="gameGrid"></div>
    </div>
    <div id="toast"></div> <!-- –¢–æ—Å—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->

    <script>
        const grid = document.getElementById('gameGrid');
        const info = document.getElementById('info');
        const levelProgress = document.getElementById('levelProgress');
        const toast = document.getElementById('toast');
        let level = 1;
        let seedlings = 5; // –ù–∞—á–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∞–∂–µ–Ω—Ü–µ–≤
        let coins = 0; // –ú–æ–Ω–µ—Ç—ã
        let score = 0;
        const gridSize = 6;
        let gameState = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è
        function startLevel() {
            grid.innerHTML = '';
            gameState = [];
            const fertileCount = Math.min(3 + level, gridSize * gridSize - 1); // –û–≥—Ä–∞–Ω–∏—á–∏–º –ø–ª–æ–¥–æ—Ä–æ–¥–Ω—ã–µ –∫–ª–µ—Ç–∫–∏
            const fertileSpots = generateFertileSpots(fertileCount);

            for (let i = 0; i < gridSize; i++) {
                gameState[i] = [];
                for (let j = 0; j < gridSize; j++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.textContent = 'üåæ'; // –¢—Ä–∞–≤–∞
                    if (fertileSpots.some(([x, y]) => x === i && y === j)) {
                        cell.classList.add('fertile');
                        cell.dataset.fertile = 'true';
                    }
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.addEventListener('click', handleClick); // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è
                    grid.appendChild(cell);
                    gameState[i][j] = { fertile: !!cell.dataset.fertile, content: 'grass' };
                }
            }
            seedlings = Math.max(3, 5 - level); // –£–º–µ–Ω—å—à–∞–µ–º —Å–∞–∂–µ–Ω—Ü—ã —Å —Ä–æ—Å—Ç–æ–º —É—Ä–æ–≤–Ω—è, –º–∏–Ω–∏–º—É–º 3
            coins = Math.max(0, coins - (5 - seedlings) * 2); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–∞—Ç–∏–º –º–æ–Ω–µ—Ç—ã –Ω–∞ –¥–æ–∫—É–ø–∫—É, –µ—Å–ª–∏ –∏—Ö –º–∞–ª–æ
            updateProgress(); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            updateInfo();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–æ–¥–æ—Ä–æ–¥–Ω—ã—Ö –∫–ª–µ—Ç–æ–∫
        function generateFertileSpots(count) {
            const spots = [];
            while (spots.length < count) {
                const x = Math.floor(Math.random() * gridSize);
                const y = Math.floor(Math.random() * gridSize);
                if (!spots.some(([sx, sy]) => sx === x && sy === y)) {
                    spots.push([x, y]);
                }
            }
            return spots;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞
        function handleClick(event) {
            const row = parseInt(event.target.dataset.row);
            const col = parseInt(event.target.dataset.col);
            const cell = event.target;

            if (seedlings > 0 && gameState[row][col].fertile && gameState[row][col].content === 'grass') {
                cell.textContent = 'üå±'; // –°–∞–∂–µ–Ω–µ—Ü
                gameState[row][col].content = 'seedling';
                seedlings--;
                setTimeout(() => {
                    cell.textContent = 'üå≤'; // –î–µ—Ä–µ–≤–æ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                    gameState[row][col].content = 'tree';
                    score += 5;
                    coins += 5; // –î–∞—ë–º 5 –º–æ–Ω–µ—Ç –∑–∞ –¥–µ—Ä–µ–≤–æ
                    checkLevelEnd(); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ—Å–ª–µ —Ä–æ—Å—Ç–∞
                    updateProgress(); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                    updateInfo();
                }, 2000);
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ü–∞ —É—Ä–æ–≤–Ω—è
        function checkLevelEnd() {
            const treesLeft = gameState.flat().filter(cell => cell.content === 'tree').length;
            if (treesLeft >= 3 + level) {
                level++;
                seedlings = Math.max(3, 5 - level); // –£–º–µ–Ω—å—à–∞–µ–º —Å–∞–∂–µ–Ω—Ü—ã, –º–∏–Ω–∏–º—É–º 3
                coins = Math.max(0, coins - (5 - seedlings) * 2); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–∞—Ç–∏–º –º–æ–Ω–µ—Ç—ã –Ω–∞ –¥–æ–∫—É–ø–∫—É
                score += 10; // –ë–æ–Ω—É—Å –∑–∞ —É—Ä–æ–≤–µ–Ω—å
                alert(`–£—Ä–æ–≤–µ–Ω—å ${level - 1} –ø—Ä–æ–π–¥–µ–Ω! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —É—Ä–æ–≤–µ–Ω—å ${level}`);
                startLevel();
            }
        }

        // –î–æ–∫—É–ø–∫–∞ —Å–∞–∂–µ–Ω—Ü–µ–≤ –∑–∞ –º–æ–Ω–µ—Ç—ã
        function buySeedlings() {
            if (coins >= 2) {
                coins -= 2;
                seedlings += 1;
                showToast('–°–∞–∂–µ–Ω–µ—Ü –∫—É–ø–ª–µ–Ω –∑–∞ 2 –º–æ–Ω–µ—Ç—ã!');
                updateInfo();
            } else {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ 2 –º–æ–Ω–µ—Ç—ã –∑–∞ —Å–∞–∂–µ–Ω–µ—Ü.');
            }
        }

        // –ü–æ–∫–∞–∑ —Ç–æ—Å—Ç–∞
        function showToast(message) {
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000); // –¢–æ—Å—Ç –∏—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–≤–Ω—è
        function updateProgress() {
            const treesNeeded = 3 + level;
            const treesLeft = gameState.flat().filter(cell => cell.content === 'tree').length;
            levelProgress.value = treesLeft;
            levelProgress.max = treesNeeded;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        function updateInfo() {
            info.textContent = `–£—Ä–æ–≤–µ–Ω—å: ${level} | –°–∞–∂–µ–Ω—Ü–µ–≤: ${seedlings} | –ú–æ–Ω–µ—Ç—ã: ${coins} | –û—á–∫–∏: ${score}`;
        }

        // –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
        startLevel();
    </script>
</body>
</html>